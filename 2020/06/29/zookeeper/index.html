<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/blog/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/blog/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/blog/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="bigdata," />








  <link rel="shortcut icon" type="image/x-icon" href="/blog/favicon.ico?v=5.0.1" />






<meta name="description" content="ZooKeeper的基本使用zookeeper的常用服务端命令服务启动命令sh ${ZOOKEEPER_HOME}/bin/zkServer.sh start
服务停止命令sh ${ZOOKEEPER_HOME}/bin/zkServer.sh stop
服务重启命令sh ${ZOOKEEPER_HOME}/bin/zkServer.sh restart
服务状态命令sh ${ZOOKEEPER_">
<meta property="og:type" content="article">
<meta property="og:title" content="zookeeper">
<meta property="og:url" content="http://baimoon.github.io/2020/06/29/zookeeper/index.html">
<meta property="og:site_name" content="Baimoon's Note">
<meta property="og:description" content="ZooKeeper的基本使用zookeeper的常用服务端命令服务启动命令sh ${ZOOKEEPER_HOME}/bin/zkServer.sh start
服务停止命令sh ${ZOOKEEPER_HOME}/bin/zkServer.sh stop
服务重启命令sh ${ZOOKEEPER_HOME}/bin/zkServer.sh restart
服务状态命令sh ${ZOOKEEPER_">
<meta property="og:updated_time" content="2020-07-15T15:15:10.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="zookeeper">
<meta name="twitter:description" content="ZooKeeper的基本使用zookeeper的常用服务端命令服务启动命令sh ${ZOOKEEPER_HOME}/bin/zkServer.sh start
服务停止命令sh ${ZOOKEEPER_HOME}/bin/zkServer.sh stop
服务重启命令sh ${ZOOKEEPER_HOME}/bin/zkServer.sh restart
服务状态命令sh ${ZOOKEEPER_">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://baimoon.github.io/2020/06/29/zookeeper/"/>

  <title> zookeeper | Baimoon's Note </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/blog/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Baimoon's Note</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/blog/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/blog/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/blog/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/blog/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                zookeeper
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2020-06-29T14:13:23+08:00" content="2020-06-29">
              2020-06-29
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/blog/categories/zookeeper/" itemprop="url" rel="index">
                    <span itemprop="name">zookeeper</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="ZooKeeper的基本使用"><a href="#ZooKeeper的基本使用" class="headerlink" title="ZooKeeper的基本使用"></a>ZooKeeper的基本使用</h1><h2 id="zookeeper的常用服务端命令"><a href="#zookeeper的常用服务端命令" class="headerlink" title="zookeeper的常用服务端命令"></a>zookeeper的常用服务端命令</h2><h2 id="服务启动命令"><a href="#服务启动命令" class="headerlink" title="服务启动命令"></a>服务启动命令</h2><p>sh ${ZOOKEEPER_HOME}/bin/zkServer.sh start</p>
<h2 id="服务停止命令"><a href="#服务停止命令" class="headerlink" title="服务停止命令"></a>服务停止命令</h2><p>sh ${ZOOKEEPER_HOME}/bin/zkServer.sh stop</p>
<h2 id="服务重启命令"><a href="#服务重启命令" class="headerlink" title="服务重启命令"></a>服务重启命令</h2><p>sh ${ZOOKEEPER_HOME}/bin/zkServer.sh restart</p>
<h2 id="服务状态命令"><a href="#服务状态命令" class="headerlink" title="服务状态命令"></a>服务状态命令</h2><p>sh ${ZOOKEEPER_HOME}/bin/zkServer.sh status</p>
<h2 id="连接服务命令"><a href="#连接服务命令" class="headerlink" title="连接服务命令"></a>连接服务命令</h2><p>sh ${ZOOKEEPER_HOME}/bin/zkCli.sh -server host:port</p>
<h2 id="zookeeper的常用客户端命令"><a href="#zookeeper的常用客户端命令" class="headerlink" title="zookeeper的常用客户端命令"></a>zookeeper的常用客户端命令</h2><h3 id="ls-命令"><a href="#ls-命令" class="headerlink" title="ls 命令"></a>ls 命令</h3><p>ls命令用于列出指定ZNode的子节点</p>
<h3 id="create-命令"><a href="#create-命令" class="headerlink" title="create 命令"></a>create 命令</h3><p>create命令用于创建指定的ZNode。</p>
<h3 id="get-命令"><a href="#get-命令" class="headerlink" title="get 命令"></a>get 命令</h3><p>get命令用于获取指定ZNode的值。</p>
<h3 id="set-命令"><a href="#set-命令" class="headerlink" title="set 命令"></a>set 命令</h3><p>set命令用于设置指定ZNode的值。</p>
<h3 id="delete命令"><a href="#delete命令" class="headerlink" title="delete命令"></a>delete命令</h3><p>delete命令用于删除指定的ZNode，不能删除子ZNode不为空的ZNode。</p>
<h3 id="rmr-递归删除节点"><a href="#rmr-递归删除节点" class="headerlink" title="rmr 递归删除节点"></a>rmr 递归删除节点</h3><p>使用rmr命令可以删除节点以及节点的子节点。</p>
<h3 id="quit-命令"><a href="#quit-命令" class="headerlink" title="quit 命令"></a>quit 命令</h3><p>quit用于退出当前科幻。</p>
<h2 id="数据状态信息"><a href="#数据状态信息" class="headerlink" title="数据状态信息"></a>数据状态信息</h2><blockquote>
<p>cZxid：节点被创建时使用的事务id - 不变<br>ctime: 节点的创建时间 - 不变<br>mZxid: 节点最后一次被修改使用的事务id - 改变<br>mtime：节点最后一次被修改的时间 - 改变<br>pZxid：子节点id。<br>cversion：子节点version<br>dataVersion： 当前节点数据版本号，数据修改一次，版本号增加一。<br>aclVersion：节点ACL的版本，ACL修改一次，版本号增加一。<br>ephemeralOwner：临时节点所归属的Session。<br>dataLength：数据长度。<br>numChildren：子节点的个数。</p>
</blockquote>
<h2 id="zookeeper的四字母命令"><a href="#zookeeper的四字母命令" class="headerlink" title="zookeeper的四字母命令"></a>zookeeper的四字母命令</h2><table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>conf</td>
<td>(New in 3.3.0)输出相关服务配置的详细信息。比如端口、zk数据及日志配置路径、最大连接数，session超时时间、serverId等</td>
</tr>
<tr>
<td>cons</td>
<td>(New in 3.3.0)列出所有连接到这台服务器的客户端连接/会话的详细信息。包括“接受/发送”的包数量、session id 、操作延迟、最后的操作执行等信息。</td>
</tr>
<tr>
<td>crst</td>
<td>(New in 3.3.0)重置当前这台服务器所有连接/会话的统计信息</td>
</tr>
<tr>
<td>dump</td>
<td>列出未经处理的会话和临时节点（只在leader上有效）</td>
</tr>
<tr>
<td>envi</td>
<td>输出关于服务器的环境详细信息（不同于conf命令），比如host.name、java.version、java.home、user.dir=/data/zookeeper-3.4.6/bin之类信息</td>
</tr>
<tr>
<td>reqs</td>
<td>列出未经处理的请求</td>
</tr>
<tr>
<td>ruok</td>
<td>测试服务是否处于正确状态。如果正常，返回“imok”</td>
</tr>
<tr>
<td>srst</td>
<td>重置服务器的统计信息</td>
</tr>
<tr>
<td>srvr</td>
<td>(New in 3.3.0)输出服务器的详细信息。zk版本、接收/发送包数量、连接数、模式（leader/follower）、节点总数。</td>
</tr>
<tr>
<td>stat</td>
<td>输出关于性能和连接的客户端的列表</td>
</tr>
<tr>
<td>wchs</td>
<td>列出Server的watch的详细信息</td>
</tr>
<tr>
<td>wchc</td>
<td>通过Session列出服务器watch的详细信息，他的输出是一个与watch相关的会话的列表。小心使用。</td>
</tr>
<tr>
<td>wchp</td>
<td>通过路径列出服务器watch的详细信息。它输出一个与Session相关的路径。小心使用。</td>
</tr>
<tr>
<td>mntr</td>
<td>(New in 3.4.0)列出集群的健康状态。包括“接受/发送”的包数量、操作延迟、当前服务模式（leader/follower）、节点总数、watch总数、临时节点总数。</td>
</tr>
</tbody>
</table>
<p>如何使用四字命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">echo conf | nc host port</div><div class="line"></div><div class="line">如：</div><div class="line">echo stat | nc zookeeper.com 2181</div></pre></td></tr></table></figure></p>
<p>比如可以使用stat来查看当前server节点的连接信息，从而找出连接数太多的server。</p>
<h1 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理"></a>权限管理</h1><h2 id="ACL"><a href="#ACL" class="headerlink" title="ACL"></a>ACL</h2><h3 id="ACL的特性"><a href="#ACL的特性" class="headerlink" title="ACL的特性"></a>ACL的特性</h3><blockquote>
<p>ZooKeeper 的权限控制是基于每个 znode 节点的，需要对每个节点设置权限<br>每个 znode 支持设置多种权限控制方案和多个权限<br>子节点不会继承父节点的权限，客户端无权访问某节点，但可能可以访问它的子节点</p>
</blockquote>
<h3 id="可控操作"><a href="#可控操作" class="headerlink" title="可控操作"></a>可控操作</h3><p>ACL可以控制的具体操作有：</p>
<blockquote>
<p>CREATE ：（缩写c）可以创建子节点。<br>DELETE ：（缩写d）可以删除子节点。<br>READ ：（缩写r）可以读取节点数据及显示子节点列表。<br>WRITE ：（缩写w）可以设置节点数据。<br>ADMIN ：（缩写a）可以设置节点访问控制列表权限。</p>
</blockquote>
<h3 id="控制模式"><a href="#控制模式" class="headerlink" title="控制模式"></a>控制模式</h3><p>ACL以如下模式进行ACL控制：</p>
<blockquote>
<p>world ：只有一个用户：anyone，代表所有人（默认）。<br>ip ：使用IP地址认证。<br>auth ：使用以添加认证的用户认证。<br>digest ：使用“用户名：密码”认证。<br>sasl：Kerberos的认证方式</p>
</blockquote>
<p>设置ACL的命令为setAcl，此命令后面跟的是znode和需要设置的Acl信息，如：setAcl / ip:127.0.0.1:cdwra。其中的Acl信息包含三部分内容：Acl模式：模式信息：具体的权限。<br>对于world模式的设置为：world:anyone:cdrwa，其中world:anyone是固定的，后面的cdrwa可以根据自己的需求进行设置。对于ip模式的设置为：ip:127.0.0.1:cdwra，ip指定了ACL的模式，模式信息为ip地址，最后是具体的权限。auth模式的设置为: auth:userName:cdrwa，其中auth指定了ACL的模式，userName指定需要使用的认证的用户名，最后是具体的权限，这里的第二部分的userName是指通过addauth userName:password命令在server上通过鉴权用户名，也就是使用server中已经鉴权过的用户的信息进行设置。digest模式的设置为：digest:userName:password:cdwra，digest指定了ACL的模式，userName:password是通过特殊处理的账号和密码（下面会介绍），最后一部分是具体的权限。</p>
<p>通过 setAcl /path digest:userName:password:acl 可以设置 digest类型的ACL。这里的密码是经过SHA1及BASE64处理过的密文，在Shell中如下命令来获取：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">echo -n &lt;user&gt;:&lt;password&gt; | openssl dgst -binary -sha1 | openssl base64</div></pre></td></tr></table></figure></p>
<p>对于auth和digest两种方式设置的ACL，需要通过addauth添加认证信息后，才可以操作。</p>
<h3 id="相关命令"><a href="#相关命令" class="headerlink" title="相关命令"></a>相关命令</h3><p>与ACL相关的命令包括如下：</p>
<blockquote>
<p>getAcl：获取指定ZNode的ACL信息。<br>setAcl：设置制定ZNode的ACL信息。<br>addauth： 为当前连接增加认证信息。</p>
</blockquote>
<h2 id="Kerberos"><a href="#Kerberos" class="headerlink" title="Kerberos"></a>Kerberos</h2><p>ZooKeeper中使用Kerberos可以用来控制三个点：1、Server之间的连接；2、Client与Server之间的连接；3、ZNode的ACL。如果要在ZooKeeper中启用Kerberos，需要进行如下配置：<br>首先需要在zoo.cfg中增加如下配置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">authProvider.1=org.apache.zookeeper.server.auth.SASLAuthenticationProvider</div><div class="line">jaasLoginRenew=3600000</div><div class="line">kerberos.removeHostFromPrincipal=true</div><div class="line">kerberos.removeRealmFromPrincipal=true</div></pre></td></tr></table></figure></p>
<p>在ZooKeeper的配置目录下（/opt/zookeeper/conf）添加环境文件“java.env”，其内容为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">export JVMFLAGS=&quot;-Djava.security.auth.login.config=/home/zookeeper/zookeeper-3.5.1-alpha/conf/jaas.conf&quot; // 此处指定jaas.conf文件</div></pre></td></tr></table></figure></p>
<p>在ZooKeeper的配置目录下（/opt/zookeeper/conf）添加配置文件“jaas.conf”，其内容为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">Server &#123;</div><div class="line">com.sun.security.auth.module.Krb5LoginModule required</div><div class="line">useKeyTab=true</div><div class="line">keyTab=&quot;/home/zookeeper/zookeeper-3.5.1-alpha/conf/zookeeper.keytab&quot; // 指定keyTab文件</div><div class="line">storeKey=true</div><div class="line">useTicketCache=false</div><div class="line">principal=&quot;zookeeper/zdh-237@ZDH.COM&quot;; // 指定principal文件</div><div class="line">&#125;;</div><div class="line">Client &#123;</div><div class="line">com.sun.security.auth.module.Krb5LoginModule required</div><div class="line">useKeyTab=true</div><div class="line">keyTab=&quot;/home/zookeeper/zookeeper-3.5.1-alpha/conf/zookeeper.keytab&quot; // 指定keyTab文件</div><div class="line">storeKey=true</div><div class="line">useTicketCache=false</div><div class="line">principal=&quot;zookeeper/zdh-237@ZDH.COM&quot;; // 指定principal文件</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>这里包含了server的和client的，如果不需要client，可以只保留server 的。<br>另外，开启了Kerberos的ZooKeeper集群是可以通过非Kerberos方式连接的，server会自动降级。</p>
<h2 id="超级管理员角色"><a href="#超级管理员角色" class="headerlink" title="超级管理员角色"></a>超级管理员角色</h2><p>默认的ZK Server在启动的时候，是没有超级管理员的权限的，要增加超级管理员的权限，我们可以在zkServer.sh<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">case $1 in</div><div class="line">start)</div><div class="line">    echo  -n &quot;Starting zookeeper ... &quot;</div><div class="line">    if [ -f &quot;$ZOOPIDFILE&quot; ]; then</div><div class="line">      if kill -0 `cat &quot;$ZOOPIDFILE&quot;` &gt; /dev/null 2&gt;&amp;1; then</div><div class="line">         echo $command already running as process `cat &quot;$ZOOPIDFILE&quot;`. </div><div class="line">         exit 0</div><div class="line">      fi</div><div class="line">    fi</div><div class="line">    nohup &quot;$JAVA&quot; &quot;-Dzookeeper.log.dir=$&#123;ZOO_LOG_DIR&#125;&quot; &quot;-Dzookeeper.root.logger=$&#123;ZOO_LOG4J_PROP&#125;&quot; \</div><div class="line">    #TODO</div><div class="line">    -cp &quot;$CLASSPATH&quot; $JVMFLAGS $ZOOMAIN &quot;$ZOOCFG&quot; &gt; &quot;$_ZOO_DAEMON_OUT&quot; 2&gt;&amp;1 &lt; /dev/null &amp;</div></pre></td></tr></table></figure></p>
<p>中的“#TODO”位置增加<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&quot;-Dzookeeper.DigestAuthenticationProvider.superDigest=super:crJlNpw5TWXtn9f8LCsep65WWyg=&quot; \</div></pre></td></tr></table></figure></p>
<p>这样一段配置，那么在连接到这个节点后，使用addauth digest super:password进行鉴权，然后就有超级管理员的权限啦。<br>超级管理员可以使用的场景设置ACL的账号密码忘记了，或者想要操作由Kerberos管理的的ZNode。</p>
<h1 id="Python-操作zookeeper"><a href="#Python-操作zookeeper" class="headerlink" title="Python 操作zookeeper"></a>Python 操作zookeeper</h1><p>首先需要安装 kazoo<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install kazoo</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/python</div><div class="line"></div><div class="line">import sys</div><div class="line">from kazoo.client import KazooClient,KazooState</div><div class="line"></div><div class="line">zk = KazooClient(</div><div class="line">    hosts=&apos;hadoop2035.rz.momo.com:2182&apos;</div><div class="line">    ,timeout=10.0</div><div class="line">    )</div><div class="line">zk.start()</div><div class="line"></div><div class="line">path = &quot;/databridgemanager_mirror/dataDir/finished&quot;</div><div class="line">children = zk.get_children(path);</div><div class="line"></div><div class="line">zk.stop()</div><div class="line">zk.close()</div></pre></td></tr></table></figure>
<h1 id="问题排查"><a href="#问题排查" class="headerlink" title="问题排查"></a>问题排查</h1><h2 id="Session-Timeout"><a href="#Session-Timeout" class="headerlink" title="Session Timeout"></a>Session Timeout</h2><p>在ZooKeeper的使用过程中，经常遇到的一个问题是 Session Timeout，在我们的使用场景中，Kafka的某些节点总是遇到Session Timeout从而导致leader切换。</p>
<h2 id="ZooKeeper的监控"><a href="#ZooKeeper的监控" class="headerlink" title="ZooKeeper的监控"></a>ZooKeeper的监控</h2>
      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/blog/tags/bigdata/" rel="tag">#bigdata</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/blog/2019/12/05/kerberos/" rel="next" title="kerberos">
                <i class="fa fa-chevron-left"></i> kerberos
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/blog/2020/07/04/tmux/" rel="prev" title="tmux">
                tmux <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/blog/uploads/avatar.png"
               alt="baimoon" />
          <p class="site-author-name" itemprop="name">baimoon</p>
          <p class="site-description motion-element" itemprop="description">Baimoon's blog</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/blog/archives">
              <span class="site-state-item-count">66</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/blog/categories">
                <span class="site-state-item-count">24</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/blog/tags">
                <span class="site-state-item-count">30</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/baimoon" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://gallery.xrange.org" title="xrange" target="_blank">xrange</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#ZooKeeper的基本使用"><span class="nav-number">1.</span> <span class="nav-text">ZooKeeper的基本使用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#zookeeper的常用服务端命令"><span class="nav-number">1.1.</span> <span class="nav-text">zookeeper的常用服务端命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#服务启动命令"><span class="nav-number">1.2.</span> <span class="nav-text">服务启动命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#服务停止命令"><span class="nav-number">1.3.</span> <span class="nav-text">服务停止命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#服务重启命令"><span class="nav-number">1.4.</span> <span class="nav-text">服务重启命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#服务状态命令"><span class="nav-number">1.5.</span> <span class="nav-text">服务状态命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#连接服务命令"><span class="nav-number">1.6.</span> <span class="nav-text">连接服务命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#zookeeper的常用客户端命令"><span class="nav-number">1.7.</span> <span class="nav-text">zookeeper的常用客户端命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ls-命令"><span class="nav-number">1.7.1.</span> <span class="nav-text">ls 命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#create-命令"><span class="nav-number">1.7.2.</span> <span class="nav-text">create 命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#get-命令"><span class="nav-number">1.7.3.</span> <span class="nav-text">get 命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#set-命令"><span class="nav-number">1.7.4.</span> <span class="nav-text">set 命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#delete命令"><span class="nav-number">1.7.5.</span> <span class="nav-text">delete命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rmr-递归删除节点"><span class="nav-number">1.7.6.</span> <span class="nav-text">rmr 递归删除节点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#quit-命令"><span class="nav-number">1.7.7.</span> <span class="nav-text">quit 命令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据状态信息"><span class="nav-number">1.8.</span> <span class="nav-text">数据状态信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#zookeeper的四字母命令"><span class="nav-number">1.9.</span> <span class="nav-text">zookeeper的四字母命令</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#权限管理"><span class="nav-number">2.</span> <span class="nav-text">权限管理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ACL"><span class="nav-number">2.1.</span> <span class="nav-text">ACL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ACL的特性"><span class="nav-number">2.1.1.</span> <span class="nav-text">ACL的特性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#可控操作"><span class="nav-number">2.1.2.</span> <span class="nav-text">可控操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#控制模式"><span class="nav-number">2.1.3.</span> <span class="nav-text">控制模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#相关命令"><span class="nav-number">2.1.4.</span> <span class="nav-text">相关命令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Kerberos"><span class="nav-number">2.2.</span> <span class="nav-text">Kerberos</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#超级管理员角色"><span class="nav-number">2.3.</span> <span class="nav-text">超级管理员角色</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Python-操作zookeeper"><span class="nav-number">3.</span> <span class="nav-text">Python 操作zookeeper</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#问题排查"><span class="nav-number">4.</span> <span class="nav-text">问题排查</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Session-Timeout"><span class="nav-number">4.1.</span> <span class="nav-text">Session Timeout</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ZooKeeper的监控"><span class="nav-number">4.2.</span> <span class="nav-text">ZooKeeper的监控</span></a></li></ol></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016-07 - 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">baimoon</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/blog/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/blog/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/blog/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/blog/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/blog/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/blog/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/blog/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/blog/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/blog/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/blog/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/blog/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  

</body>
</html>
